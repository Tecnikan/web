var __slice=[].slice,__indexOf=[].indexOf||function(f){for(var e=0,a=this.length;e<a;e++)if(e in this&&this[e]===f)return e;return-1};
(function(f){var e=function(a,b){var d,c=this;this.input=a;this.defaultOptions={animate:!0,snapMid:!1,classPrefix:null,classSuffix:null,theme:null};this.settings=f.extend({},this.defaultOptions,b);this.settings.theme&&(this.settings.classSuffix="-"+this.settings.theme);this.input.hide();this.slider=f("<div>").addClass("slider"+(this.settings.classSuffix||"")).css({position:"relative",userSelect:"none",boxSizing:"border-box"}).insertBefore(this.input);this.input.attr("id")&&this.slider.attr("id",this.input.attr("id")+
"-slider");this.track=f("<div>").addClass("track").css({position:"absolute",top:"50%",width:"100%",userSelect:"none",cursor:"pointer"}).appendTo(this.slider);this.dragger=f("<div>").addClass("dragger").css({position:"absolute",top:"50%",userSelect:"none",cursor:"pointer"}).appendTo(this.slider);this.slider.css({minHeight:this.dragger.outerHeight(),marginLeft:this.dragger.outerWidth()/2,marginRight:this.dragger.outerWidth()/2});this.track.css({marginTop:this.track.outerHeight()/-2});this.dragger.css({marginTop:this.dragger.outerWidth()/
-2,marginLeft:this.dragger.outerWidth()/-2});this.track.mousedown(function(a){if(1===a.which)return c.domDrag(a.pageX,a.pageY,!0),c.dragging=!0,!1});this.dragger.mousedown(function(a){if(1===a.which)return c.dragging=!0,c.dragger.addClass("dragging"),c.domDrag(a.pageX,a.pageY),!1});f("body").mousemove(function(a){if(c.dragging)return c.domDrag(a.pageX,a.pageY),f("body").css({cursor:"pointer"})}).mouseup(function(){if(c.dragging)return c.dragging=!1,c.dragger.removeClass("dragging"),d=c.valueToRatio(c.value),
c.input.trigger("slider:release",{value:c.value,ratio:d,position:d*c.slider.outerWidth(),el:c.slider}),f("body").css({cursor:"auto"})});this.pagePos=0;""===this.input.val()?(this.value=this.getRange().min,this.input.val(this.value)):this.value=this.nearestValidValue(this.input.val());this.setSliderPositionFromValue(this.value);d=this.valueToRatio(this.value);this.input.trigger("slider:ready",{value:this.value,ratio:d,position:d*this.slider.outerWidth(),el:this.slider})};e.prototype.setRatio=function(a){var b;
a=Math.min(1,a);a=Math.max(0,a);b=this.ratioToValue(a);this.setSliderPositionFromValue(b);return this.valueChanged(b,a,"setRatio")};e.prototype.setValue=function(a){var b;a=this.nearestValidValue(a);b=this.valueToRatio(a);this.setSliderPositionFromValue(a);return this.valueChanged(a,b,"setValue")};e.prototype.domDrag=function(a,b,d){var c;null==d&&(d=!1);a-=this.slider.offset().left;a=Math.min(this.slider.outerWidth(),a);a=Math.max(0,a);if(this.pagePos!==a)return this.pagePos=a,b=a/this.slider.outerWidth(),
c=this.ratioToValue(b),this.valueChanged(c,b,"domDrag"),this.settings.snap?this.setSliderPositionFromValue(c,d):this.setSliderPosition(a,d)};e.prototype.setSliderPosition=function(a,b){null==b&&(b=!1);return b&&this.settings.animate?this.dragger.animate({left:a},200):this.dragger.css({left:a})};e.prototype.setSliderPositionFromValue=function(a,b){var d;null==b&&(b=!1);d=this.valueToRatio(a);return this.setSliderPosition(d*this.slider.outerWidth(),b)};e.prototype.getRange=function(){return this.settings.allowedValues?
{min:Math.min.apply(Math,this.settings.allowedValues),max:Math.max.apply(Math,this.settings.allowedValues)}:this.settings.range?{min:parseFloat(this.settings.range[0]),max:parseFloat(this.settings.range[1])}:{min:0,max:1}};e.prototype.nearestValidValue=function(a){var b,d,c,e;c=this.getRange();a=Math.min(c.max,a);a=Math.max(c.min,a);return this.settings.allowedValues?(b=null,f.each(this.settings.allowedValues,function(){if(null===b||Math.abs(this-a)<Math.abs(b-a))return b=this}),b):this.settings.step?
(d=(c.max-c.min)/this.settings.step,e=Math.floor((a-c.min)/this.settings.step),(a-c.min)%this.settings.step>this.settings.step/2&&e<d&&(e+=1),e*this.settings.step+c.min):a};e.prototype.valueToRatio=function(a){var b,d,c,e,f,g,j;if(this.settings.equalSteps){j=this.settings.allowedValues;e=f=0;for(g=j.length;f<g;e=++f)if(b=j[e],!("undefined"!==typeof d&&null!==d)||Math.abs(b-a)<Math.abs(d-a))d=b,c=e;return this.settings.snapMid?(c+0.5)/this.settings.allowedValues.length:c/(this.settings.allowedValues.length-
1)}b=this.getRange();return(a-b.min)/(b.max-b.min)};e.prototype.ratioToValue=function(a){var b;if(this.settings.equalSteps)return b=this.settings.allowedValues.length,a=Math.round(a*b-0.5),a=Math.min(a,this.settings.allowedValues.length-1),this.settings.allowedValues[a];b=this.getRange();return this.nearestValidValue(a*(b.max-b.min)+b.min)};e.prototype.valueChanged=function(a,b,d){if(a.toString()!==this.value.toString())return this.value=a,b={value:a,ratio:b,position:b*this.slider.outerWidth(),trigger:d,
el:this.slider},this.input.val(a).trigger(f.Event("change",b)).trigger("slider:changed",b)};f.extend(f.fn,{simpleSlider:function(){var a,b,d;d=arguments[0];a=2<=arguments.length?__slice.call(arguments,1):[];b=["setRatio","setValue"];return f(this).each(function(){var c;if(d&&0<=__indexOf.call(b,d))return c=f(this).data("slider-object"),c[d].apply(c,a);c=d;return f(this).data("slider-object",new e(f(this),c))})}});return f(function(){return f("[data-slider]").each(function(){var a,b,d;a=f(this);d=
{};if(b=a.data("slider-values")){var c,e,h,g;h=b.split(",");g=[];c=0;for(e=h.length;c<e;c++)b=h[c],g.push(parseFloat(b));d.allowedValues=g}a.data("slider-range")&&(d.range=a.data("slider-range").split(","));a.data("slider-step")&&(d.step=a.data("slider-step"));d.snap=a.data("slider-snap");d.equalSteps=a.data("slider-equal-steps");a.data("slider-theme")&&(d.theme=a.data("slider-theme"));return a.simpleSlider(d)})})})(this.jQuery||this.Zepto,this);
